[Unit]
Description={{ service.description }}
{%- if service.before is defined %}
Before={{ service.before }}.target
{%- endif %}

[Service]
ExecStart={{ service.exec }}
{%- if service.environment is defined %}
{%- for env in service.environment %}
Environment={{ env }}
{%- endfor %}
{%- endif %}
{%- if service.options is defined %}
{%- for key, value in service.options.items() %}
{{ key }}={% if value != None %}{{ value }}{% endif %}
{%- endfor %}
{%- endif %}

[Install]
WantedBy={{ service.wanted_by }}.target
